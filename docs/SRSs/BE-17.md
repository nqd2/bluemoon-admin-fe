### PHẦN 1: TÀI LIỆU KỸ THUẬT (SRS) CHO TICKET [BE-17]

#### **Ticket: [BE-17] Dashboard Stats Expansion**

**1. Thông tin chung**

- **Assignee:** Nguyễn Quý Đức (Fullstack Lead)
- **Branch Name:** `feature/BE-17-dashboard-stats`
- **Estimated Time:** 1h

**2. Mô tả (Description)**
Mở rộng API thống kê Dashboard (`/api/stats/dashboard`) để cung cấp cái nhìn chi tiết hơn về tình trạng các căn hộ (chung cư).
Hiện tại API chỉ trả về tổng số lượng căn hộ. Cần bổ sung thêm phân loại theo trạng thái (Có người ở/Trống) và phân bố theo tòa nhà.

**3. Yêu cầu kỹ thuật (Technical Specs)**

- **Endpoint:** `GET /api/stats/dashboard` (Giữ nguyên)
- **Response Data Update:**
  - Bổ sung trường `apartmentStats`:
    - `total`: Tổng số căn hộ.
    - `status`: Mảng object `{ status: 'Occupied' | 'Vacant', count: number }`.
      - **Occupied**: Căn hộ đã có chủ sở hữu (`ownerId` exists).
      - **Vacant**: Căn hộ chưa có chủ.
    - `byBuilding`: Mảng object `{ building: string, count: number }`. Phân loại theo trường `building`.

**4. Acceptance Criteria (Tiêu chí chấp nhận)**

- [x] **API Response:**
  - API trả về cấu trúc dữ liệu mới mà không làm gãy FE cũ (các trường cũ vẫn giữ nguyên).
  - Dữ liệu `status` phản ánh đúng số lượng căn hộ có chủ và chưa có chủ.
  - Dữ liệu `byBuilding` thống kê đúng số lượng căn hộ mỗi tòa.
- [x] **Performance:**
  - Sử dụng MongoDB Aggregation để tính toán server-side, tránh loop ở application layer.
