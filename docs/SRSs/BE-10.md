### PHẦN 1: TÀI LIỆU KỸ THUẬT (SRS) CHO TICKET [BE-10]

#### **Ticket: [BE-10] Create Fee Type (Tạo khoản thu)**

**1. Thông tin chung**

* **Assignee:** Backend Dev
* **Branch Name:** `feature/BE-10-create-fee`
* **Estimated Time:** 2h
* **Priority:** High

**2. Mô tả (Description)**
API cho phép Admin định nghĩa các khoản phí mới trong hệ thống. Các khoản phí có thể là bắt buộc (Phí dịch vụ, phí vệ sinh) hoặc tự nguyện (Quỹ ủng hộ).

**3. Yêu cầu kỹ thuật (Technical Specs)**

*   **Endpoint:** `POST /api/fees`
*   **Authentication:** Yêu cầu `Bearer Token` (Admin/Mod).
*   **Payload Structure:**
    ```json
    {
      "title": "Phí dịch vụ tháng 12/2025",
      "description": "Thu phí dịch vụ chung cư...",
      "type": "Service", // Enum: 'Service', 'Contribution'
      "amount": 5000,
      "unit": "m2" // Enum: 'hộ', 'khẩu', 'm2'
    }
    ```
*   **Data Validation (Zod Schema):**
    *   `title`: String, min 5 chars, required.
    *   `type`: Enum `['Service', 'Contribution']`. Required.
    *   `amount`: Number, min 0. Required.
    *   `unit`: Enum `['hộ', 'khẩu', 'm2']`. Required.

**4. Business Logic (Logic nghiệp vụ)**

1.  **Validate Input:** Kiểm tra dữ liệu đầu vào.
2.  **Logic `Contribution` (Tự nguyện):**
    *   Nếu `type` là `Contribution`, trường `amount` có thể bằng 0 (để người dân tự đóng tùy tâm) hoặc là mức gợi ý.
    *   Trường `unit` thường là `hộ` (đóng theo hộ gia đình).
3.  **Logic `Service` (Bắt buộc):**
    *   `amount` phải > 0.
4.  **Database:** Lưu vào collection `Fees`.

**5. Acceptance Criteria (Tiêu chí chấp nhận)**

* [ ] **Validation:**
    *   Nếu `type` không hợp lệ -> Trả về `400 Bad Request`.
    *   Nếu `amount` < 0 -> Trả về `400 Bad Request`.
* [ ] **Success Case:**
    *   Tạo thành công -> Trả về `201 Created` kèm object Fee vừa tạo.
* [ ] **Data Integrity:**
    *   Field `createdAt` được tự động gán thời gian hiện tại.
    *   Field `isActive` mặc định là `true`.

**6. Error Codes & Messages**

*   `400`: "Invalid fee type" / "Amount must be positive".
*   `401`: "Unauthorized".
