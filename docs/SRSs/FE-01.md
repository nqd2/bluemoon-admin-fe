# FE-01: Authentication (Đăng nhập)

## 1. Tổng quan

Module này xử lý quy trình Xác thực (Authentication) cho trang quản trị (Admin Dashboard). Đây là điểm truy cập đầu tiên để quản trị viên vào hệ thống.
Tương ứng với logic Backend tại `BE-02` (Admin Authentication) và Postman endpoint `Authentication -> Login`.

## 2. Đặc tả giao diện (UI Specifications)

### Các thành phần (Components)

- **Login Page Layout**: Bố cục căn giữa, gọn gàng, có hình nền hoặc màu nền đơn giản.
- **Login Card**: Khung chứa form đăng nhập.
- **Input Fields**:
  - `Username` (Type: Text, Placeholder: "admin123")
  - `Password` (Type: Password, Placeholder: "**\*\***")
- **Buttons**:
  - `Login` (Nút chính - Primary Button)
- **Feedback Elements (Phản hồi)**:
  - `Error Alert`: Hiển thị lỗi validate hoặc lỗi từ API (ví dụ: "Username hoặc mật khẩu không đúng").
  - `Loading Spinner`: Hiển thị bên trong nút Login khi đang xử lý request.

### Ánh xạ dữ liệu (Data Mapping)

| Nhãn trường (Label) | Tên biến FE | Key Payload (API) | Kiểu     | Validate (FE)               |
| :------------------ | :---------- | :---------------- | :------- | :-------------------------- |
| Username            | `username`  | `username`        | Text     | Bắt buộc, Tối thiểu 6 ký tự |
| Password            | `password`  | `password`        | Password | Bắt buộc, Tối thiểu 6 ký tự |

## 3. Luồng xử lý & Tương tác (Flow & Interaction)

### Luồng chính

1. **Truy cập**: Người dùng vào đường dẫn `/login`.
2. **Nhập liệu**: Người dùng nhập `Username` và `Password`.
3. **Gửi form**: Người dùng nhấn nút "Login".
   - UI chuyển sang trạng thái loading (disable nút, hiện spinner).
   - Thực hiện validate (kiểm tra các trường bắt buộc).
4. **Thành công**:
   - Nếu API trả về `200 OK` kèm token:
     - Lưu `token` (bảo mật, ví dụ: HTTP-only cookie hoặc xử lý qua Server Action session management).
     - Chuyển hướng (Redirect) người dùng đến Dashboard (`/dashboard`).
     - Hiển thị thông báo thành công (Optional).
5. **Thất bại**:
   - Nếu API trả về lỗi (ví dụ: `401 Unauthorized`):
     - Tắt trạng thái loading.
     - Hiển thị thông báo lỗi từ API ("Invalid username or password") trong component Error Alert.

### Quy tắc Validate

- **Username**: Không được để trống, tối thiểu 6 ký tự.
- **Password**: Không được để trống, tối thiểu 6 ký tự.

## 4. Chi tiết triển khai kỹ thuật (Technical Implementation Details)

### Tích hợp API

- **Endpoint**: `POST ${process.env.BACKEND_URL}/api/auth/login`
- **Method**: `POST`
- **Content-Type**: `application/json`

### Chiến lược Fetching Data

- **Tính năng Framework**: Sử dụng **Server Actions** để xử lý submit form và thiết lập cookie bảo mật.
- **Phương pháp đề xuất**:
  1. Tạo một Server Action `loginAction(formData)`.
  2. Bên trong action:
     - Validate dữ liệu dùng `zod`.
     - Gửi `POST` request đến Backend API.
     - Nếu thành công, set session cookie (Token) dùng `cookies().set()`.
     - Trả về trạng thái thành công.
  3. Tại Client Component (`LoginForm`):
     - Sử dụng `useFormState` (hoặc tương tự) để xử lý kết quả trả về.
     - Khi nhận kết quả thành công, gọi `router.push('/dashboard')`.

### Xử lý lỗi (Error Handling)

- Bắt lỗi `401` để hiển thị "Sai thông tin đăng nhập".
- Bắt lỗi `500` hoặc lỗi mạng để hiển thị "Lỗi hệ thống, vui lòng thử lại".

## 5. Git Branch

**Branch name**: `feature/FE-01-authentication`