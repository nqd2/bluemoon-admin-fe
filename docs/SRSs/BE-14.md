### PHẦN 1: TÀI LIỆU KỸ THUẬT (SRS) CHO TICKET [BE-14]

#### **Ticket: [BE-14] Get Payment Status (Thống kê tình trạng đóng)**

**1. Thông tin chung**

* **Assignee:** Backend Dev
* **Branch Name:** `feature/BE-14-payment-status`
* **Estimated Time:** 4h

**2. Mô tả (Description)**
API xem danh sách tổng hợp cho một khoản thu cụ thể, hiển thị hộ nào đã đóng, hộ nào chưa đóng.

**3. Yêu cầu kỹ thuật (Technical Specs)**

*   **Endpoint:** `GET /api/fees/:id/status`
*   **Authentication:** Yêu cầu `Bearer Token`.
*   **Logic Phức tạp (Aggregation):**
    1.  Lấy danh sách tất cả `Apartments`.
    2.  Lấy danh sách tất cả `Transactions` có `feeId` == `:id`.
    3.  **Merge Data:**
        *   Duyệt qua list Apartments.
        *   Với mỗi Apartment, tìm trong list Transactions xem có bản ghi nào khớp `apartmentId` không.
        *   Nếu có -> Status: "Đã đóng", Amount: Transaction.totalAmount, Date: Transaction.date.
        *   Nếu không -> Status: "Chưa đóng", Amount: 0.

**4. Response Structure**

```json
{
  "feeInfo": {
    "title": "Phí dịch vụ T12",
    "totalCollected": 5000000 // Tổng tiền đã thu được
  },
  "apartments": [
    {
      "apartmentId": "...",
      "name": "P101",
      "ownerName": "Nguyen Van A",
      "status": "PAID", // hoặc "UNPAID"
      "paidAmount": 200000,
      "paidDate": "2025-12-20..."
    },
    {
      "apartmentId": "...",
      "name": "P102",
      "ownerName": "Tran Van B",
      "status": "UNPAID",
      "paidAmount": 0,
      "paidDate": null
    }
  ]
}
```

**5. Acceptance Criteria**

* [ ] **Full Coverage:** Phải liệt kê được **TẤT CẢ** các căn hộ trong hệ thống, không chỉ những hộ đã đóng.
* [ ] **Accuracy:** Trạng thái PAID/UNPAID phải chính xác dựa trên bảng Transactions.
* [ ] **Summary:** Tính được tổng số tiền đã thu (`totalCollected`) cho khoản phí đó.
